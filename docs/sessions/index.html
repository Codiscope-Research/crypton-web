<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
        <title>Crypton - a Zero Knowledge application framework</title>
        <link rel="stylesheet" type="text/css" href="/fonts/stylesheet.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="/style/style.css" />
        <link rel="stylesheet" type="text/css" href="/style/github.css" />
        <script src="/script/rainbow.min.js"></script>
        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7154525-5']);
        _gaq.push(['_trackPageview']);
        _gaq.push(['_trackEvent']);
        _gaq.push(['_trackSocial']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
        </script>
    </head>
    <body>
      <div id="sidebar">
        <a href="/">
          <img src="/images/crypton.png" alt="Crypton" />
        </a>

        <ul id="nav">
            <li><a href="/">Overview</a></li>
            <li><a href="/getting-started">Getting Started</a></li>
            <li><a href="/developer-guide">Developer Guide</a></li>
            <li><a></a></li>
            <li><a href="https://twitter.com/spideroak">@spideroak</a></li>
            <li><a href="https://twitter.com/crypton_io">@crypton_io</a></li>
            <li><a href="https://spideroak.com/blog/">SpiderOak Blog</a></li>
            <li><h4>Documentation</h4></li>
            <li><a href="/docs/sessions">Sessions</a></li>
            <li><a href="/docs/containers">Containers</a></li>
            <li><a href="/docs/messages">Messages</a></li>
            <li><h4>Examples</h4></li>
            <li><a href="https://diary.crypton.io/">Diary</a></li>
            <li><a href="https://chat.crypton.io/">Chat</a></li>
            <li><a href="https://whiteboard.crypton.io/">Whiteboard</a></li>
        </ul>
    </div>
    <div id="content">
        <a href="https://github.com/SpiderOak/crypton" onClick="_gaq.push(['_trackEvent', 'sites_links', 'forkme', 'click'])" id="github"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>

        <div id="main">
            <!-- Please follow semantic linefeeds in the text.
            http://rhodesmill.org/brandon/2012/one-sentence-per-line/ -->
            <div class="quest">
                <h1>Accounts</h1>
                <div class="qbod">
                    <div class="qside">
                    </div>
                    <div class="qtext">
                        <p>Each user of a Crypton app must have an account. </p>
                        <p><strong>crypton.generateAccount(username, passPhrase, step, done)</strong></p>
                        <p>This method will generate an account object with salts and keys. The <code>step</code> function is called frequently
                            to indicate progress. The <code>done</code> function is called upon completion, passing potentially null error and account arguments.</p>
                        <pre><code data-language="javascript">var username = 'inputFromUser';
var passPhrase = 'moreInputFromUser';

var i = 0;
function step () {
  console.log(++i);
}

crypton.generateAccount(username, passPhrase, step, done);
</code></pre>
                        <p><strong>account.save(callback)</strong></p>
                        <p>Sends account object to the server for storage, either updating or creating the record. After saving the account (successfully or otherwise) it is still necessary to authenticate with the server.</p>
                        <pre><code data-language="javascript">function done (err, account) {
  if (err) {
    // alert the user, adjust application flow
    alert(err);
    return;
  }

  account.save(function (err) {
    if (err) {
      // username is taken
      alert(err);
      return;
    }
  });
});
</code></pre>
            </div>

            <div class="quest">
                <h1>Sessions</h1>
                <div class="qbod">
                    <div class="qside">
                    </div>
                    <div class="qtext">
                        <p>A session is necessary for requesting and receiving data. </p>
                        <p><strong>crypton.authorize(username, passPhrase, callback)</strong></p>
                        <p>Requests a challenge from the server for the given <code>username</code> and responds to it using the given <code>passPhrase</code>.
                        <pre><code data-language="javascript">crypton.authorize(username, passPhrase, function (err, session) {
  if (err) {
    // likely an incorrect passPhrase
    alert(err);
    return;
  }
});
</code></pre>
                        <p><strong>session.serialize()</strong></p>
                        <p>Serialize a session for storage.</p>
                        <pre><code data-language="javascript">var serializedSession = session.serialize();

console.log(serializedSession);
//
// TODO
</code></pre>

                        <p><strong>session.ping(callback)</strong></p>
                        <p>After resurrecting a cached session, we will want to make sure the server still beleives that it is valid. For example the session may be invalid is the password has been changed since it was saved, if the account has been deleted, or if it has been disabled server-side (such as for non-payment).</p>
                        <pre><code data-language="javascript">crypton.resurrect(sessionString, function (err, session) {
  session.ping(function (err) {
    if (err) {
      // alert the user
      return;
    }

    // continue application flow
  });
});
</code></pre>
                        <p><strong>session.load(containerName, callback)</strong></p>
                        <p>Loads a <a href="/docs/containers">container</a>.</p>
                        <p><strong>session.create(containerName, callback)</strong></p>
                        <p>Attempts to create a <a href="/docs/containers">container</a>.</p>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p class="small">Crypton and this site are &copy;2013 <a href="https://spideroak.com">SpiderOak, Inc.</a></p>
            <p class="small">
                <a href="https://spideroak.com/community/">Social Media</a> • 
                <a href="https://spideroak.com/blog/">Blog</a> •
                <a href="https://github.com/SpiderOak/crypton">Crypton GitHub</a>
            </p>
            <p class="small">
                <a href="https://spideroak.com/privacy_policy">Privacy Policy</a> •
                <a href="https://spideroak.com/terms_of_use">Terms of Use</a>
            </p>
            <img src="/images/zero_knowledge_privacy_seal.png" style="margin: 0 auto; padding: 15px;" />
        </footer>
    </div>
    </body>
    </html>
